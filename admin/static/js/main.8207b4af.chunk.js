(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5443:function(e,t,a){e.exports=a(5625)},5448:function(e,t,a){},5625:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(34),i=a.n(c),l=(a(5448),a(4)),s=a.n(l),o=a(5),u=a(8),d=a(9),m=a(11),p=a(10),h=a(12),E=a(5629),g=a(5630),f=a(5626),b=a(15),v=a(87),y=a(16),S=a(1),_=a(17),C=a.n(_),O=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={dateStart:"",dateEnd:"",statistical:{}},a.getStatistical=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/dashboard?dateStart=".concat(a.state.dateStart,"&dateEnd=").concat(a.state.dateEnd));case 2:t=e.sent,a.setState({statistical:t.data});case 4:case"end":return e.stop()}},e,this)})),a.handleChangeDate=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(y.a)({},t.target.name,t.target.value));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/dashboard");case 2:t=e.sent,this.setState({statistical:t.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.statistical.statistialOfEachType?Object(v.a)(this.state.statistical.statistialOfEachType):"";return t[0]&&(t=t.sort(function(e,t){return t.totalAmount-e.totalAmount})),n.a.createElement("div",null,n.a.createElement("h2",{style:{color:"gray"}},"Business Situation"),n.a.createElement(S.y,{onChange:this.handleChangeDate,value:this.state.dateStart,type:"date",name:"dateStart"}),n.a.createElement(S.y,{onChange:this.handleChangeDate,value:this.state.dateEnd,type:"date",name:"dateEnd"}),n.a.createElement(S.a,{variant:"contained",color:"primary",onClick:this.getStatistical,size:"small"},"Filter"),n.a.createElement("br",null),n.a.createElement(S.g,{container:!0,spacing:16,justify:"flex-start"},t&&t.map(function(t,a){return n.a.createElement(S.g,{item:!0,xs:"auto",md:3,key:a},n.a.createElement(S.p,{style:{padding:10,marginTop:20}},n.a.createElement("h1",{style:{color:"gray"}},t.type),n.a.createElement("p",{style:{color:"gray"}},"Total Revenue:"," ",n.a.createElement("b",{style:{color:"#ff835d"}},"$",t.totalPrice)),n.a.createElement("p",{style:{color:"gray"}},"Total Amout:"," ",n.a.createElement("b",{style:{color:"#616161"}},t.totalAmount)," ","Products"),n.a.createElement(S.k,{variant:"determinate",style:{marginTop:10,padding:2},value:e.state.statistical.totalSoldProducts?t.totalAmount/e.state.statistical.totalSoldProducts*100:0,color:0===a?"secondary":"primary"})))})))}}]),t}(r.Component),w=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={dateStart:"",dateEnd:"",statistical:{}},a.getStatistical=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/dashboard?dateStart=".concat(a.state.dateStart,"&dateEnd=").concat(a.state.dateEnd));case 2:t=e.sent,a.setState({statistical:t.data});case 4:case"end":return e.stop()}},e,this)})),a.handleChangeDate=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(y.a)({},t.target.name,t.target.value));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/dashboard");case 2:t=e.sent,this.setState({statistical:t.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("h2",{style:{color:"gray"}},"Top Seller Products"),n.a.createElement(S.y,{onChange:this.handleChangeDate,value:this.state.dateStart,type:"date",name:"dateStart"}),n.a.createElement(S.y,{onChange:this.handleChangeDate,value:this.state.dateEnd,type:"date",name:"dateEnd"}),n.a.createElement(S.a,{variant:"contained",color:"primary",onClick:this.getStatistical,size:"small"},"Filter"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(S.g,{container:!0,spacing:16,justify:"flex-start",alignItems:"stretch"},this.state.statistical.soldProducts&&this.state.statistical.soldProducts.sort(function(e,t){return e.amount-t.amount<1}).slice(0,10).map(function(t,a){return n.a.createElement(S.g,{item:!0,xs:6,md:3,key:a,style:{padding:10}},n.a.createElement(S.p,{style:{padding:10,height:"100%"}},n.a.createElement(S.e,{variant:"round",size:"small",color:0===a?"secondary":"primary",style:{boxShadow:"none"}},a+1),n.a.createElement("img",{alt:"product_img",src:t.details.product_img,width:100}),n.a.createElement("h3",{style:{color:"gray"}},t.details.product_name),n.a.createElement("p",null,"Type: ",t.details.producer),n.a.createElement("p",null,"Total Revenue: $",t.totalPrice),n.a.createElement("p",null,"Total Amout: ",t.amount),n.a.createElement(S.k,{variant:"determinate",style:{marginTop:10,padding:2},value:t.amount/e.state.statistical.totalSoldProducts*100,color:0===a?"secondary":"primary"})))})))}}]),t}(r.Component),j=a(28),k=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={statistical:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/dashboard");case 2:t=e.sent,this.setState({statistical:t.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",null,this.state.statistical?n.a.createElement(S.g,{container:!0,spacing:16},n.a.createElement(S.g,{item:!0,xs:"auto",style:{minWidth:"270px"},lg:3,md:3,sm:12},n.a.createElement(S.p,{style:{padding:10,background:"#f86c6b"}},n.a.createElement(S.g,{container:!0,spacing:16},n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("div",{style:{color:"white",fontSize:30,textShadow:"0 0 5px white"}},"$",this.state.statistical.totalRevenue)),n.a.createElement(S.g,{item:!0,xs:4},n.a.createElement(j.i,{style:{fontSize:70,color:"#ffffff80"},color:"inherit"})),n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("b",{style:{color:"white"}},"Total Revenue ($)"))))),n.a.createElement(S.g,{item:!0,xs:"auto",style:{minWidth:"270px"},lg:3,md:3,sm:12},n.a.createElement(S.p,{style:{padding:10,background:"rgb(79, 141, 255)"}},n.a.createElement(S.g,{container:!0,spacing:16},n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("div",{style:{color:"white",fontSize:30,textShadow:"0 0 5px white"}},this.state.statistical.totalProducts)),n.a.createElement(S.g,{item:!0,xs:4},n.a.createElement(j.k,{style:{fontSize:70,color:"#ffffff80"},color:"inherit"})),n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("b",{style:{color:"white"}},"Total Products"))))),n.a.createElement(S.g,{item:!0,xs:"auto",style:{minWidth:"270px"},lg:3,md:3,sm:12},n.a.createElement(S.p,{style:{padding:10,background:"rgb(126, 79, 202)"}},n.a.createElement(S.g,{container:!0,spacing:16},n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("div",{style:{color:"white",fontSize:30,textShadow:"0 0 5px white"}},this.state.statistical.totalBills)),n.a.createElement(S.g,{item:!0,xs:4},n.a.createElement(j.h,{style:{fontSize:70,color:"#ffffff80"},color:"inherit"})),n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("b",{style:{color:"white"}},"Total Bills"))))),n.a.createElement(S.g,{item:!0,xs:"auto",style:{minWidth:"270px"},lg:3,md:3,sm:12},n.a.createElement(S.p,{style:{padding:10,background:"rgb(64, 138, 45)"}},n.a.createElement(S.g,{container:!0,spacing:16},n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("div",{style:{color:"white",fontSize:30,textShadow:"0 0 5px white"}},this.state.statistical.totalCategories)),n.a.createElement(S.g,{item:!0,xs:4},n.a.createElement(j.e,{style:{fontSize:70,color:"#ffffff80"},color:"inherit"})),n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("b",{style:{color:"white"}},"Total Categories"))))),n.a.createElement(S.g,{item:!0,xs:"auto",style:{minWidth:"270px"},lg:3,md:3,sm:12},n.a.createElement(S.p,{style:{padding:10,background:"rgb(88, 98, 171)"}},n.a.createElement(S.g,{container:!0,spacing:16},n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("div",{style:{color:"white",fontSize:30,textShadow:"0 0 5px white"}},this.state.statistical.totalUsers)),n.a.createElement(S.g,{item:!0,xs:4},n.a.createElement(j.j,{style:{fontSize:70,color:"#ffffff80"},color:"inherit"})),n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("b",{style:{color:"white"}},"Total Users"))))),n.a.createElement(S.g,{item:!0,xs:"auto",style:{minWidth:"270px"},lg:3,md:3,sm:12},n.a.createElement(S.p,{style:{padding:10,background:"rgb(39, 39, 39)"}},n.a.createElement(S.g,{container:!0,spacing:16},n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("div",{style:{color:"white",fontSize:30,textShadow:"0 0 5px white"}},this.state.statistical.totalSoldProducts)),n.a.createElement(S.g,{item:!0,xs:4},n.a.createElement(j.g,{style:{fontSize:70,color:"#ffffff80"},color:"inherit"})),n.a.createElement(S.g,{item:!0,xs:8},n.a.createElement("b",{style:{color:"white"}},"Total Sold Products")))))):n.a.createElement("p",null,"Loading..."))}}]),t}(r.Component),x=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={statistical:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/dashboard");case 2:t=e.sent,this.setState({statistical:t.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{style:{color:"gray"}},"Top Users"),n.a.createElement(S.p,null,this.state.statistical?n.a.createElement(S.r,null,n.a.createElement(S.u,null,n.a.createElement(S.w,null,n.a.createElement(S.t,null,"Top"),n.a.createElement(S.t,null,"ID"),n.a.createElement(S.t,null,"Name"),n.a.createElement(S.t,null,"Email"),n.a.createElement(S.t,null,"Phone NUmber"),n.a.createElement(S.t,null,"Total Paid Price"),n.a.createElement(S.t,null,"Status"))),n.a.createElement(S.s,null,this.state.statistical.topUsers&&this.state.statistical.topUsers.slice(0,10).map(function(e,t){return n.a.createElement(S.w,{key:e.user._id},n.a.createElement(S.t,null,n.a.createElement(S.e,{variant:"extended",size:"small",color:0===t?"secondary":"primary",style:{boxShadow:"none"}},t+1)),n.a.createElement(S.t,null,e.user._id),n.a.createElement(S.t,null,e.user.user_name),n.a.createElement(S.t,null,e.user.user_email),n.a.createElement(S.t,null,e.user.user_phone),n.a.createElement(S.t,null,n.a.createElement("b",{style:{color:"red"}},"$",e.paidMoney)),n.a.createElement(S.t,null,e.user.user_status.toString()))}))):n.a.createElement("div",null,"Loading...")))}}]),t}(r.Component),P=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:"".concat(e.root," fadeIn")},n.a.createElement("div",{className:e.header},"Dash Board"),n.a.createElement(S.d,{style:{margin:30}}),n.a.createElement(k,null),n.a.createElement(S.d,{style:{margin:30}}),n.a.createElement(O,null),n.a.createElement(S.d,{style:{margin:30}}),n.a.createElement(w,null),n.a.createElement(S.d,{style:{margin:30}}),n.a.createElement(x,null))}}]),t}(r.Component),D=Object(b.withStyles)(function(){return{root:{backgroundColor:"white",borderRadius:"7px",padding:50},header:{fontSize:"2em",color:"gray",fontWeight:"bold",textAlign:"center"}}})(P),R=a(75),N=a.n(R),T=a(59),A=a.n(T),B=a(44),I=a.n(B),U=a(39),L=a.n(U),W=a(76),F=a.n(W),z=a(77),q=a.n(z),M=a(5627),G=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).signOut=function(){window.localStorage.removeItem("adminPageAccess"),window.location="/admin/signin"},a.toggleSidebar=function(){var e=window.document.getElementsByClassName("sidebar")[0],t=window.document.getElementsByClassName("App")[0];"none"===e.style.display?(t.style.marginLeft="166px",e.style.display="block"):(t.style.marginLeft="0",e.style.display="none")},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:e.root},n.a.createElement(N.a,{position:"fixed",color:"inherit"},n.a.createElement(A.a,null,n.a.createElement(I.a,{variant:"h6",color:"inherit",className:"".concat(e.grow," brand-title")},n.a.createElement(M.a,{to:"/admin",className:"brand-text"},"Admin Page"),n.a.createElement(L.a,{id:"toggleSidebar",onClick:this.toggleSidebar,className:e.menuButton,color:"inherit","aria-label":"Menu"},n.a.createElement(F.a,{color:"action"}))),this.props.adminName&&n.a.createElement("span",{style:{color:"#18776e"}},this.props.adminName),n.a.createElement(L.a,{"aria-owns":"menu-appbar","aria-haspopup":"true",color:"default"},n.a.createElement(q.a,null)),n.a.createElement(S.a,{onClick:this.signOut,variant:"contained",color:"primary",size:"small"},"OUt"))))}}]),t}(n.a.Component),$=Object(b.withStyles)({root:{flexGrow:1},grow:{flexGrow:1,fontWeight:"bold"},menuButton:{marginLeft:40,marginRight:0}})(G),H=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={adminPermission:""},a.handleSidebarClick=function(){window.screen.width<="538"&&(window.document.getElementsByClassName("sidebar")[0].style.display="none",window.document.getElementsByClassName("App")[0].style.marginLeft="0")},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(window.localStorage.getItem("adminPageAccess")).admin_key,e.next=3,C.a.get("/api/users/".concat(t,"/adminPermission"));case 3:a=e.sent,this.setState({adminPermission:a.data.admin});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(S.l,{className:"sidebar"},n.a.createElement(M.a,{to:"/admin/",className:"text-white",onClick:this.handleSidebarClick},n.a.createElement(S.m,{button:!0},n.a.createElement(j.c,null),n.a.createElement(S.n,{disableTypography:!0,primary:"Dashboard"}))),this.state.adminPermission.product&&n.a.createElement(M.a,{to:"/admin/product",onClick:this.handleSidebarClick},n.a.createElement(S.m,{button:!0},n.a.createElement(j.k,null),n.a.createElement(S.n,{disableTypography:!0,className:"text-white",primary:"Product"}))),this.state.adminPermission.user&&n.a.createElement(M.a,{to:"/admin/user",onClick:this.handleSidebarClick},n.a.createElement(S.m,{button:!0},n.a.createElement(j.j,null),n.a.createElement(S.n,{disableTypography:!0,className:"text-white",primary:"User"}))),this.state.adminPermission.bill&&n.a.createElement(M.a,{to:"/admin/bill",onClick:this.handleSidebarClick},n.a.createElement(S.m,{button:!0},n.a.createElement(j.h,null),n.a.createElement(S.n,{disableTypography:!0,className:"text-white",primary:"Bill"}))),this.state.adminPermission.category&&n.a.createElement(M.a,{to:"/admin/category",onClick:this.handleSidebarClick},n.a.createElement(S.m,{button:!0},n.a.createElement(j.e,null),n.a.createElement(S.n,{disableTypography:!0,className:"text-white",primary:"Category"})))))}}]),t}(r.Component),Q=a(13);function V(){return function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_REQUEST"}),e.next=3,C()("/api/products/");case 3:return a=e.sent,e.abrupt("return",t({type:"GET_SUCCESS",products:a.data}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}var Y=function(){return function(e){return e({type:"CLOSE_ALERT_DELETED"})}};function J(){return function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_REQUEST"}),e.next=3,C()("/api/producers/");case 3:return a=e.sent,e.abrupt("return",t({type:"GET_SUCCESS",categories:a.data}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}var X=function(){return function(e){return e({type:"CLOSE_ALERT_DELETED"})}},Z=a(22),K=a(184),ee=a(14),te=a.n(ee),ae=a(78),re=a.n(ae),ne=a(80),ce=a.n(ne),ie=a(81),le=a.n(ie),se=a(82),oe=a.n(se),ue=a(181),de=a.n(ue),me=a(182),pe=a.n(me),he=a(83),Ee=a.n(he),ge=a(60),fe=a.n(ge),be=a(79),ve=a.n(be),ye={success:re.a,warning:ve.a,error:ce.a,info:le.a};var Se=Object(b.withStyles)(function(e){return{success:{backgroundColor:de.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:pe.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,r=e.message,c=e.onClose,i=e.variant,l=Object(K.a)(e,["classes","className","message","onClose","variant"]),s=ye[i];return n.a.createElement(fe.a,Object.assign({className:te()(t[i],a),"aria-describedby":"client-snackbar",message:n.a.createElement("span",{id:"client-snackbar",className:t.message},n.a.createElement(s,{className:te()(t.icon,t.iconVariant)}),r),action:[n.a.createElement(L.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:c},n.a.createElement(oe.a,{className:t.icon}))]},l))}),_e=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(Ee.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.props.open,autoHideDuration:6e3,onClose:this.handleClose},n.a.createElement(Se,{onClose:this.handleClose,variant:"success",message:this.props.children})))}}]),t}(n.a.Component),Ce=Object(b.withStyles)(function(e){return{margin:{margin:e.spacing.unit}}})(_e),Oe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={product_name:"",product_price:"",producer:"",quantity:"",product_img:"",product_img_path:"",isAdding:!1,message:"",open:!1,err:{errSelection:!1},categories:[],validateError:!1},a.handleChangeFile=function(e){a.setState({product_img:e.target.files[0],product_img_path:e.target.files[0].name})},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleClose=function(){a.setState({open:!1})},a.validated__input=function(e,t,r,n){var c=e,i=document.getElementsByName(r)[0];return n&&a.setState({err:Object(y.a)({},n,!0)}),!!i&&(t.test(c)?(n&&a.setState({err:Object(y.a)({},n.key,!1),validateError:""}),!0):(i.focus(),a.setState({validateError:"Please complete this field"}),!1))},a.validated__input_file=function(e,t){var r=document.getElementsByName(e)[0];return t&&a.setState({err:Object(y.a)({},t,!0)}),r&&r.value?(t&&a.setState({err:Object(y.a)({},t.key,!1)}),!0):(r.click(),!1)},a.valudated__form=function(){return!!(a.validated__input(a.state.product_name,/[\w\s-]{1,}/,"product_name")&&a.validated__input(a.state.product_price,/^[1-9]{1,5}$/,"product_price")&&a.validated__input(a.state.quantity,/^[1-9]{1,5}$/,"quantity")&&a.validated__input(a.state.producer,/^[\w]{1,20}$/,"producer","errSelection")&&a.validated__input_file("product_img"))},a.handleSubmit=function(){var e=Object(o.a)(s.a.mark(function e(t){var r,n,c,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props,n=r.createError,c=r.createProduct,i=r.getProductsWithRedux,t.preventDefault(),a.valudated__form()){e.next=4;break}return e.abrupt("return");case 4:return a.setState({isAdding:!0}),e.next=7,c(a.state);case 7:n||(i(),a.setState({isAdding:!1,open:!0,message:"Adding ".concat(a.state.product_name," success")}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getCategoriesWithRedux();case 2:this.props.categories.data&&this.setState({categories:this.props.categories.data});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:e.formTitle},"Add new Product"),n.a.createElement("form",{encType:"multipart/form-data",id:"addNewProduct",className:e.container,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit},n.a.createElement(S.y,{required:!0,name:"product_name",label:"Product Name",className:e.textField,onChange:this.handleChange}),n.a.createElement(S.y,{required:!0,name:"product_price",label:"Price ($)",className:e.textField,onChange:this.handleChange,type:"number"}),n.a.createElement(S.y,{required:!0,value:this.state.quantity,name:"quantity",label:"Quantity",className:e.textField,onChange:this.handleChange,type:"number"}),n.a.createElement(S.f,{className:e.textField},n.a.createElement(S.j,{htmlFor:"select-producer"},"Catefory"),n.a.createElement(S.q,{error:this.state.err.errSelection,value:this.state.producer,onChange:this.handleChange,inputProps:{name:"producer",id:"select-producer"}},this.state.categories&&this.state.categories.map(function(e,t){return n.a.createElement(S.o,{key:t,value:e.producer_id},e.producer_name)}))),n.a.createElement(S.y,{required:!0,name:"product_img",label:"Choose Image",className:e.textField,onChange:this.handleChangeFile,type:"file"}),this.props.createError&&n.a.createElement("p",{style:{color:"red"}},this.props.createError),this.state.validateError&&n.a.createElement("p",{style:{color:"red"}},this.state.validateError)),n.a.createElement(S.a,{variant:"contained",color:"primary",form:"addNewProduct",type:"submit"},this.state.isAdding?n.a.createElement(S.c,{size:24,className:e.bgWhite}):n.a.createElement("span",null,"Add New Product")),n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.open},this.state.message)))}}]),t}(r.Component),we=Object(b.withStyles)(function(){return{container:{display:"flex",flexWrap:"wrap"},textField:{margin:10,width:200},dense:{marginTop:19},menu:{width:200},formTitle:{color:"#4445"},bgWhite:{color:"white"}}})(Object(Z.b)(function(e){return{createError:e.product.createError,categories:e.category.categories}},function(e){return{createProduct:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a,r){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(n=new FormData).append("product_img",e.product_img),t.next=5,C.a.post("/api/products/",n,{headers:{"Content-Type":"multipart/form-data"}});case 5:return t.next=7,C.a.post("/api/products/",e);case 7:return t.abrupt("return",a({type:"CREATE_SUCCESS"}));case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",a({type:"CREATE_ERROR",err:t.t0.message}));case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))},getProductsWithRedux:function(){return e(V())},getCategoriesWithRedux:function(){return e(J())}}})(Oe)),je=a(5628),ke=a(35);function xe(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Pe=[{id:"product_id",numeric:!1,disablePadding:!0,label:"Id"},{id:"product_img",numeric:!0,disablePadding:!1,label:"Image"},{id:"product_name",numeric:!0,disablePadding:!1,label:"Name"},{id:"product_price",numeric:!0,disablePadding:!1,label:"Price ($)"},{id:"producer",numeric:!0,disablePadding:!1,label:"Producer"},{id:"quantity",numeric:!0,disablePadding:!1,label:"Quantity"}],De=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,r=t.order,c=t.orderBy,i=t.numSelected,l=t.rowCount,s=t.onSearch;return n.a.createElement(S.u,null,n.a.createElement(S.w,null,n.a.createElement(S.t,{colSpan:8},n.a.createElement(S.y,{id:"standard-search",label:"Search by Name",type:"search",margin:"normal",onChange:s}))),n.a.createElement(S.w,null,n.a.createElement(S.t,{padding:"checkbox"},n.a.createElement(S.b,{indeterminate:i>0&&i<l,checked:i===l,onChange:a})),Pe.map(function(t){return n.a.createElement(S.t,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:c===t.id&&r},n.a.createElement(S.A,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},n.a.createElement(S.x,{active:c===t.id,direction:r,onClick:e.createSortHandler(t.id)},t.label)))},this),n.a.createElement(S.t,null,"Action")))}}]),t}(n.a.Component),Re=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleDelete=Object(o.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isDeleting:!0}),e.next=3,a.props.deleteProducts(a.props.selected);case 3:case"end":return e.stop()}},e,this)})),a.state={isDeleting:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){this.setState({isDeleting:!1})}},{key:"render",value:function(){var e=this.props,t=e.numSelected,a=e.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.z,{className:te()(a.root,Object(y.a)({},a.highlight,t>0))},n.a.createElement("div",{className:a.title},t>0?n.a.createElement(S.B,{color:"inherit",variant:"subtitle1"},t," selected"):n.a.createElement(S.B,{variant:"h6",id:"tableTitle"},"Products")),n.a.createElement("div",{className:a.spacer}),n.a.createElement("div",{className:a.actions},t>0?n.a.createElement(S.A,{title:"Delete"},n.a.createElement(S.h,{onClick:this.handleDelete,"aria-label":"Delete"},this.state.isDeleting?n.a.createElement(S.c,{size:24}):n.a.createElement(j.d,null))):n.a.createElement(S.A,{title:"Filter list"},n.a.createElement(S.h,{"aria-label":"Filter list"},n.a.createElement(j.f,null))))))}}]),t}(n.a.Component);Re=Object(b.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ke.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Object(Z.b)(function(e){return{numDeleted:e.product.numDeleted}},function(e){return{deleteProducts:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a,r){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=[],e.forEach(function(e){n.push(C.a.delete("/api/products/".concat(e)))}),t.next=5,Promise.all(n);case 5:return a(V()),t.abrupt("return",a({type:"DELETE_SUCCESS",numDeleted:e.length}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"DELETE_ERROR",err:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))}}})(Re));var Ne=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:5,redirectToEdit:""},a.handleRequestSort=function(e,t){var r=t,n="desc";a.state.orderBy===t&&"desc"===a.state.order&&(n="asc"),a.setState({order:n,orderBy:r})},a.editProduct=function(e,t){a.setState({redirectToEdit:"/admin/product/".concat(t)})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e.product_id})}}):a.setState({selected:[]})},a.handleSearch=function(e){var t,r=e.target.value;t=a.props.products.filter(function(e){var t=r.trim().toLowerCase();return-1!==e.product_name.trim().toLowerCase().indexOf(t)}),a.setState({data:t})},a.handleClick=function(e,t){var r=a.state.selected,n=r.indexOf(t),c=[];-1===n?c=c.concat(r,t):0===n?c=c.concat(r.slice(1)):n===r.length-1?c=c.concat(r.slice(0,-1)):n>0&&(c=c.concat(r.slice(0,n),r.slice(n+1))),a.setState({selected:c})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.products&&this.setState({data:this.props.products})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.data,c=a.order,i=a.orderBy,l=a.selected,s=a.rowsPerPage,o=a.page,u=s-Math.min(s,r.length-o*s);return n.a.createElement(S.p,{className:t.root},this.state.redirectToEdit&&n.a.createElement(je.a,{to:this.state.redirectToEdit}),n.a.createElement(Re,{numSelected:l.length,selected:l}),n.a.createElement("div",{className:t.tableWrapper},n.a.createElement(S.r,{className:t.table,"aria-labelledby":"tableTitle"},n.a.createElement(De,{numSelected:l.length,order:c,orderBy:i,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,onSearch:this.handleSearch,rowCount:r.length}),n.a.createElement(S.s,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var r=t(e[0],a[0]);return 0!==r?r:e[1]-a[1]}),a.map(function(e){return e[0]})}(r,function(e,t){return"desc"===e?function(e,a){return xe(e,a,t)}:function(e,a){return-xe(e,a,t)}}(c,i)).slice(o*s,o*s+s).map(function(a){var r=e.isSelected(a.product_id);return n.a.createElement(S.w,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,key:a.product_id,selected:r},n.a.createElement(S.t,{padding:"checkbox"},n.a.createElement(S.b,{checked:r,onClick:function(t){return e.handleClick(t,a.product_id)}})),n.a.createElement(S.t,{component:"th",scope:"row",padding:"none"},a.product_id),n.a.createElement(S.t,{component:"th",scope:"row",padding:"none"},n.a.createElement("img",{alt:"product_img",src:a.product_img,width:"100",style:{padding:10}})),n.a.createElement(S.t,{align:"right"},a.product_name),n.a.createElement(S.t,{align:"right"},a.product_price),n.a.createElement(S.t,{align:"right"},a.producer),n.a.createElement(S.t,{align:"right"},a.quantity),n.a.createElement(S.t,null,n.a.createElement(S.a,{variant:"contained",color:"primary",className:t.button,onClick:function(t){return e.editProduct(t,a._id)}},n.a.createElement(j.b,{style:{fontSize:20}}))))}),u>0&&n.a.createElement(S.w,{style:{height:49*u}},n.a.createElement(S.t,{colSpan:6}))))),n.a.createElement(S.v,{rowsPerPageOptions:[5,10,25],component:"div",count:r.length,rowsPerPage:s,page:o,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(n.a.Component),Te=Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Ne),Ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){a.setState({openSnackNumDeleted:!1}),(0,a.props.dispatch)(Y())},a.state={openSnackNumDeleted:!1,messDeleted:"",adminAccess:!0},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(window.localStorage.getItem("adminPageAccess")).admin_key,e.next=3,C.a.get("/api/users/".concat(t,"/adminPermission"));case 3:if(e.sent.data.admin.product){e.next=9;break}return this.setState(Object(Q.a)({},this.state,{adminAccess:!1})),e.abrupt("return");case 9:return this.setState(Object(Q.a)({},this.state,{adminAccess:!0})),a=this.props.dispatch,e.next=13,a(V());case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){e.numDeleted&&this.setState({openSnackNumDeleted:!0,messDeleted:"".concat(e.numDeleted," products has been deleted")})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.numDeleted;return n.a.createElement(n.a.Fragment,null,this.state.adminAccess?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("div",{className:t.header},"Product Manager"),n.a.createElement(S.d,{variant:"middle",className:t.m_20}),n.a.createElement(we,null),n.a.createElement(S.d,{variant:"middle",className:t.m_20}),n.a.createElement("div",{className:t.header},"All Products"),this.props.products?n.a.createElement(Te,{products:this.props.products.data}):n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("div",{className:t.header},"Loading..."))),a&&n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.openSnackNumDeleted},this.state.messDeleted))):n.a.createElement(je.a,{to:"/admin"}))}}]),t}(r.Component),Be=Object(b.withStyles)(function(){return{root:{backgroundColor:"white",minHeight:"100vh",borderRadius:"7px",padding:20},header:{fontSize:"1.7em",color:"gray",fontWeight:"bold",textAlign:"center"},m_20:{margin:20}}})(Object(Z.b)(function(e){return{products:e.product.products,numDeleted:e.product.numDeleted}})(Ae));function Ie(){return function(){var e=Object(o.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_REQUEST"}),e.next=3,C()("/api/users/");case 3:return a=e.sent,e.abrupt("return",t({type:"GET_SUCCESS",users:a.data}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}var Ue=function(){return function(e){return e({type:"CLOSE_ALERT_DELETED"})}};function Le(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var We=[{_id:"_id",numeric:!0,disablePadding:!1,label:"User ID"},{_id:"user_name",numeric:!0,disablePadding:!1,label:"Name"},{_id:"user_phone",numeric:!0,disablePadding:!1,label:"Phone"},{_id:"user_group",numeric:!0,disablePadding:!1,label:"User Group"},{_id:"user_email",numeric:!0,disablePadding:!1,label:"Email"},{_id:"user_status",numeric:!0,disablePadding:!1,label:"Status"}],Fe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,r=t.order,c=t.orderBy,i=t.numSelected,l=t.rowCount,s=t.onSearch,o=t.onSearchName,u=t.onSearchEmail;return n.a.createElement(S.u,null,n.a.createElement(S.w,null,n.a.createElement(S.t,{colSpan:3},n.a.createElement(S.y,{label:"Search by ID",type:"search",margin:"normal",onChange:s})),n.a.createElement(S.t,{colSpan:3},n.a.createElement(S.y,{label:"Search by Name",type:"search",margin:"normal",onChange:o})),n.a.createElement(S.t,{colSpan:2},n.a.createElement(S.y,{label:"Search by Email",type:"search",margin:"normal",onChange:u}))),n.a.createElement(S.w,null,n.a.createElement(S.t,{padding:"checkbox"},n.a.createElement(S.b,{indeterminate:i>0&&i<l,checked:i===l,onChange:a})),We.map(function(t){return n.a.createElement(S.t,{key:t._id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:c===t._id&&r},n.a.createElement(S.A,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},n.a.createElement(S.x,{active:c===t._id,direction:r,onClick:e.createSortHandler(t._id)},t.label)))},this),n.a.createElement(S.t,null,"Action")))}}]),t}(n.a.Component),ze=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleDelete=Object(o.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isDeleting:!0}),e.next=3,a.props.deleteUsers(a.props.selected);case 3:case"end":return e.stop()}},e,this)})),a.state={isDeleting:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){this.setState({isDeleting:!1})}},{key:"render",value:function(){var e=this.props,t=e.numSelected,a=e.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.z,{className:te()(a.root,Object(y.a)({},a.highlight,t>0))},n.a.createElement("div",{className:a.title},t>0?n.a.createElement(S.B,{color:"inherit",variant:"subtitle1"},t," selected"):n.a.createElement(S.B,{variant:"h6",_id:"tableTitle"},"Users")),n.a.createElement("div",{className:a.spacer}),n.a.createElement("div",{className:a.actions},t>0?n.a.createElement(S.A,{title:"Delete"},n.a.createElement(S.h,{onClick:this.handleDelete,"aria-label":"Delete"},this.state.isDeleting?n.a.createElement(S.c,{size:24}):n.a.createElement(j.d,null))):n.a.createElement(S.A,{title:"Filter list"},n.a.createElement(S.h,{"aria-label":"Filter list"},n.a.createElement(j.f,null))))))}}]),t}(n.a.Component);ze=Object(b.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ke.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Object(Z.b)(function(e){return{numDeleted:e.user.numDeleted}},function(e){return{deleteUsers:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a,r){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=[],e.forEach(function(e){n.push(C.a.delete("/api/users/".concat(e)))}),t.next=5,Promise.all(n);case 5:return a(Ie()),t.abrupt("return",a({type:"DELETE_SUCCESS",numDeleted:e.length}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"DELETE_ERROR",err:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))}}})(ze));var qe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:5,redirectToEdit:""},a.handleRequestSort=function(e,t){var r=t,n="desc";a.state.orderBy===t&&"desc"===a.state.order&&(n="asc"),a.setState({order:n,orderBy:r})},a.editUser=function(e,t){a.setState({redirectToEdit:"/admin/user/".concat(t)})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e._id})}}):a.setState({selected:[]})},a.handleSearch=function(e){var t,r=e.target.value;t=a.props.users.filter(function(e){var t=r.trim().toLowerCase();return-1!==e._id.indexOf(t)}),a.setState({data:t})},a.handleSearchName=function(e){var t,r=e.target.value;t=a.props.users.filter(function(e){var t=r.trim().toLowerCase();return-1!==e.user_name.indexOf(t)}),a.setState({data:t})},a.handleSearchEmail=function(e){var t,r=e.target.value;t=a.props.users.filter(function(e){var t=r.trim().toLowerCase();return-1!==e.user_email.indexOf(t)}),a.setState({data:t})},a.handleClick=function(e,t){var r=a.state.selected,n=r.indexOf(t),c=[];-1===n?c=c.concat(r,t):0===n?c=c.concat(r.slice(1)):n===r.length-1?c=c.concat(r.slice(0,-1)):n>0&&(c=c.concat(r.slice(0,n),r.slice(n+1))),a.setState({selected:c})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.users&&this.setState({data:this.props.users})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.data,c=a.order,i=a.orderBy,l=a.selected,s=a.rowsPerPage,o=a.page,u=s-Math.min(s,r.length-o*s);return n.a.createElement(S.p,{className:t.root},this.state.redirectToEdit&&n.a.createElement(je.a,{to:this.state.redirectToEdit}),n.a.createElement(ze,{numSelected:l.length,selected:l}),n.a.createElement("div",{className:t.tableWrapper},n.a.createElement(S.r,{className:t.table,"aria-labelledby":"tableTitle"},n.a.createElement(Fe,{numSelected:l.length,order:c,orderBy:i,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,onSearch:this.handleSearch,onSearchName:this.handleSearchName,onSearchEmail:this.handleSearchEmail,rowCount:r.length}),n.a.createElement(S.s,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var r=t(e[0],a[0]);return 0!==r?r:e[1]-a[1]}),a.map(function(e){return e[0]})}(r,function(e,t){return"desc"===e?function(e,a){return Le(e,a,t)}:function(e,a){return-Le(e,a,t)}}(c,i)).slice(o*s,o*s+s).map(function(a){var r=e.isSelected(a._id);return n.a.createElement(S.w,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,key:a._id,selected:r},n.a.createElement(S.t,{padding:"checkbox"},n.a.createElement(S.b,{checked:r,onClick:function(t){return e.handleClick(t,a._id)}})),n.a.createElement(S.t,{align:"right",style:{padding:"0",maxWidth:"30px",wordWrap:"break-word"}},a._id),n.a.createElement(S.t,{align:"right"},a.user_name),n.a.createElement(S.t,{align:"right"},a.user_phone),n.a.createElement(S.t,{align:"right"},a.user_group),n.a.createElement(S.t,{align:"right"},a.user_email),n.a.createElement(S.t,{align:"right"},a.user_status.toString()),n.a.createElement(S.t,null,n.a.createElement(S.a,{variant:"contained",color:"primary",className:t.button,onClick:function(t){return e.editUser(t,a._id)}},n.a.createElement(j.b,{style:{fontSize:20}}))))}),u>0&&n.a.createElement(S.w,{style:{height:49*u}},n.a.createElement(S.t,{colSpan:6}))))),n.a.createElement(S.v,{rowsPerPageOptions:[5,10,25],component:"div",count:r.length,rowsPerPage:s,page:o,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(n.a.Component),Me=Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(qe),Ge=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={_id:"",user_name:"",user_password:"",user_group:"",user_phone:"",user_email:"",onLoading:"",message:"",user_permission:{product:!1,user:!1,bill:!1,category:!1},user_status:!0,open:!1,user:{}},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleClose=function(){a.setState({open:!1})},a.checkedCheckBox=function(){for(var e=window.document.getElementsByName("user_permission"),t=0;t<e.length;t++)e[t].checked=""},a.validated__input=function(e,t,r,n){var c=e,i=document.getElementsByName(r)[0];return n&&a.setState({err:Object(y.a)({},n,!0)}),!!i&&(t.exec(c)?t.exec(c)[0]!==t.exec(c).input?(i.focus(),!1):(n&&a.setState({err:Object(y.a)({},n.key,!1)}),!0):(i.focus(),i.click(),!1))},a.valudated__form=function(){return!!(a.validated__input(a.state.user_name,/[\w\s-]{1,}/,"user_name")&&a.validated__input(a.state.user_password,/[\w\s-]{6,}/,"user_password")&&a.validated__input(a.state.user_phone,/[0-9]{10,12}/,"user_phone")&&a.validated__input(a.state.user_group,/[\w]{1,20}/,"user_group","errSelection")&&a.validated__input(a.state.user_email,/^[a-z][a-z0-9_.]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/,"user_email"))},a.handleSubmit=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.valudated__form()){e.next=3;break}return e.abrupt("return");case 3:return a.setState({onLoading:!0}),e.next=6,a.props.createUser(a.state);case 6:a.props.createError?a.setState({onLoading:!1}):(a.setState({onLoading:!1,open:!0,message:"Create ".concat(a.state.user_email," success")}),a.props.getUsersWithRedux());case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleSelectPermission=function(e){a.setState({user_permission:Object(Q.a)({},a.state.user_permission,Object(y.a)({},e.target.name,e.target.checked))})},a.handleSelectUserStatus=function(e){a.setState({user_status:e.target.checked})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:"".concat(e.root," fadeIn")},n.a.createElement("h2",{className:e.formTitle},"Create New User"),n.a.createElement(S.g,{container:!0},n.a.createElement(S.g,{item:!0,xs:6},n.a.createElement("form",{id:"addNewUser",autoComplete:"off",onSubmit:this.handleSubmit},n.a.createElement(S.y,{required:!0,name:"user_name",label:"User Name",value:this.state.user_name,className:e.textField,onChange:this.handleChange}),n.a.createElement("br",null),n.a.createElement(S.y,{required:!0,name:"user_password",label:"Password",className:e.textField,onChange:this.handleChange,value:this.state.user_password}),n.a.createElement("br",null),n.a.createElement(S.y,{required:!0,value:this.state.user_phone,name:"user_phone",label:"Phone",className:e.textField,onChange:this.handleChange,type:"number"}),n.a.createElement("br",null),n.a.createElement(S.f,{className:e.textField},n.a.createElement(S.j,{htmlFor:"user_group-select"},"Group"),n.a.createElement(S.q,{required:!0,value:this.state.user_group,onChange:this.handleChange,name:"user_group",renderValue:function(e){return e},input:n.a.createElement(S.i,{id:"user_group-select"})},n.a.createElement(S.o,{value:"admin"},"Admin"),n.a.createElement(S.o,{value:"client"},"Client"))),n.a.createElement("br",null),"admin"===this.state.user_group?n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{style:{color:"gray",fontSize:"13px"}},"Choose permission manager:"),n.a.createElement(S.b,{checked:this.state.user_permission.bill,onChange:this.handleSelectPermission,name:"bill"}),"Bill",n.a.createElement(S.b,{checked:this.state.user_permission.user,onChange:this.handleSelectPermission,name:"user"}),"User",n.a.createElement(S.b,{checked:this.state.user_permission.product,onChange:this.handleSelectPermission,name:"product"}),"Product",n.a.createElement(S.b,{checked:this.state.user_permission.category,onChange:this.handleSelectPermission,name:"category"}),"Category"):null,n.a.createElement(S.y,{required:!0,value:this.state.user_email,name:"user_email",label:"Email",className:e.textField,onChange:this.handleChange,type:"email"}),n.a.createElement("br",null),"Status :",n.a.createElement(S.b,{checked:this.state.user_status,onChange:this.handleSelectUserStatus}),this.props.createError&&n.a.createElement("h4",{style:{color:"red"}},this.props.createError)),this.state.onLoading?n.a.createElement(S.a,{variant:"contained",color:"primary"},n.a.createElement(S.c,{size:24,className:e.bgWhite})):n.a.createElement(S.a,{variant:"contained",color:"primary",form:"addNewUser",type:"submit"},"Create"),n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.open},this.state.message)))))}}]),t}(r.Component),$e=Object(b.withStyles)(function(){return{textField:{margin:10,width:400},formTitle:{color:"#4445"},bgWhite:{color:"white"},root:{backgroundColor:"white",borderRadius:"7px",padding:20}}})(Object(Z.b)(function(e){return{createError:e.user.createError}},function(e){return{createUser:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a,r){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("/api/users/",e);case 3:return t.abrupt("return",a({type:"CREATE_SUCCESS"}));case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",a({type:"CREATE_ERROR",err:t.t0.message}));case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))},getUsersWithRedux:function(){return e(Ie())}}})(Ge)),He=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){a.setState({openSnackNumDeleted:!1}),(0,a.props.dispatch)(Ue())},a.state={openSnackNumDeleted:!1,messDeleted:"",adminAccess:!0},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(window.localStorage.getItem("adminPageAccess")).admin_key,e.next=3,C.a.get("/api/users/".concat(t,"/adminPermission"));case 3:if(e.sent.data.admin.user){e.next=9;break}return this.setState(Object(Q.a)({},this.state,{adminAccess:!1})),e.abrupt("return");case 9:return this.setState(Object(Q.a)({},this.state,{adminAccess:!0})),a=this.props.dispatch,e.next=13,a(Ie());case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){e.numDeleted&&this.setState({openSnackNumDeleted:!0,messDeleted:"".concat(e.numDeleted," users has been deleted")})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.numDeleted;return n.a.createElement(n.a.Fragment,null,this.state.adminAccess?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("div",{className:t.header},"User Manager"),n.a.createElement(S.d,{variant:"middle",className:t.m_20}),n.a.createElement($e,null),n.a.createElement(S.d,{variant:"middle",className:t.m_20}),this.props.users?n.a.createElement(Me,{users:this.props.users.data}):n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("div",{className:t.header},"Loading..."))),a&&n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.openSnackNumDeleted},this.state.messDeleted))):n.a.createElement(je.a,{to:"/admin"}))}}]),t}(r.Component),Qe=Object(b.withStyles)(function(){return{root:{backgroundColor:"white",minHeight:"100vh",borderRadius:"7px",padding:20},header:{fontSize:"1.7em",color:"gray",fontWeight:"bold",textAlign:"center"},m_20:{margin:20}}})(Object(Z.b)(function(e){return{users:e.user.users,numDeleted:e.user.numDeleted}})(He)),Ve=a(88),Ye=a.n(Ve);function Je(){return function(){var e=Object(o.a)(s.a.mark(function e(t,a){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_REQUEST"}),e.next=3,C()("/api/bills/");case 3:return r=e.sent,e.abrupt("return",t({type:"GET_SUCCESS",bills:r.data}));case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}function Xe(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Ze=[{_id:"createAt",numeric:!0,disablePadding:!1,label:"Create At"},{_id:"_id",numeric:!0,disablePadding:!1,label:"Bill Id"},{_id:"authId",numeric:!0,disablePadding:!1,label:"User Id"},{_id:"totalPrice",numeric:!0,disablePadding:!1,label:"Total Price ($)"},{_id:"status",numeric:!0,disablePadding:!1,label:"Status"}],Ke=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={selectedDate:new Date},a.createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.handleDateChange=function(e){a.setState({selectedDate:e})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,r=t.order,c=t.orderBy,i=t.numSelected,l=t.rowCount,s=t.onSearch,o=t.onFilterDate;return n.a.createElement(S.u,null,n.a.createElement(S.w,null,n.a.createElement(S.t,{colSpan:4},n.a.createElement(S.y,{_id:"standard-search",label:"Search by Bill ID",type:"search",margin:"normal",onChange:s})),n.a.createElement(S.t,{colSpan:4},n.a.createElement(S.y,{id:"dateFrom",label:"From",type:"date",defaultValue:"",InputLabelProps:{shrink:!0}}),n.a.createElement(S.y,{id:"dateTo",label:"To",type:"date",defaultValue:"",InputLabelProps:{shrink:!0}}),n.a.createElement(S.a,{style:{marginTop:"15px"},variant:"contained",color:"primary",size:"small",onClick:o},"Filter"))),n.a.createElement(S.w,null,n.a.createElement(S.t,{padding:"checkbox"},n.a.createElement(S.b,{indeterminate:i>0&&i<l,checked:i===l,onChange:a})),Ze.map(function(t){return n.a.createElement(S.t,{key:t._id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:c===t._id&&r},n.a.createElement(S.A,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},n.a.createElement(S.x,{active:c===t._id,direction:r,onClick:e.createSortHandler(t._id)},t.label)))},this),n.a.createElement(S.t,null,"Action")))}}]),t}(n.a.Component),et=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleDelete=Object(o.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isDeleting:!0}),e.next=3,a.props.deleteBills(a.props.selected);case 3:case"end":return e.stop()}},e,this)})),a.state={isDeleting:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){this.setState({isDeleting:!1})}},{key:"render",value:function(){var e=this.props,t=e.numSelected,a=e.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.z,{className:te()(a.root,Object(y.a)({},a.highlight,t>0))},n.a.createElement("div",{className:a.title},t>0?n.a.createElement(S.B,{color:"inherit",variant:"subtitle1"},t," selected"):n.a.createElement(S.B,{variant:"h6",_id:"tableTitle"},"Bills")),n.a.createElement("div",{className:a.spacer}),n.a.createElement("div",{className:a.actions},t>0?n.a.createElement(S.A,{title:"Delete"},n.a.createElement(S.h,{onClick:this.handleDelete,"aria-label":"Delete"},this.state.isDeleting?n.a.createElement(S.c,{size:24}):n.a.createElement(j.d,null))):n.a.createElement(S.A,{title:"Filter list"},n.a.createElement(S.h,{"aria-label":"Filter list",onClick:this.props.onRenew},n.a.createElement(j.a,null))))))}}]),t}(n.a.Component);et=Object(b.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ke.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Object(Z.b)(function(e){return{numDeleted:e.bill.numDeleted}},function(e){return{deleteBills:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a,r){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=[],e.forEach(function(e){n.push(C.a.delete("/api/bills/".concat(e)))}),t.next=5,Promise.all(n);case 5:return a(Je()),t.abrupt("return",a({type:"DELETE_SUCCESS",numDeleted:e.length}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"DELETE_ERROR",err:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))}}})(et));var tt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:5,redirectToEdit:""},a.handleRequestSort=function(e,t){var r=t,n="desc";a.state.orderBy===t&&"desc"===a.state.order&&(n="asc"),a.setState({order:n,orderBy:r})},a.editBill=function(e,t){a.setState({redirectToEdit:"/admin/bill/".concat(t)})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e._id})}}):a.setState({selected:[]})},a.handleSearch=function(e){var t,r=e.target.value;t=a.props.bills.filter(function(e){var t=r.trim().toLowerCase();return-1!==e._id.trim().toLowerCase().indexOf(t)}),a.setState({data:t})},a.handleFilterDate=function(){var e=window.document.getElementById("dateFrom").value,t=window.document.getElementById("dateTo").value;if(e||t||a.setState({data:a.props.bills}),""!==e){e=Ye()(e,"YYYY-MM-DD"),t=""===t?void 0:Ye()(t,"YYYY-MM-DD");var r;r=a.props.bills.filter(function(a){return Ye()(a.createAt,"YYYY-MM-DD").isBetween(e,t,null,"[]")}),a.setState({data:r})}},a.handleClick=function(e,t){var r=a.state.selected,n=r.indexOf(t),c=[];-1===n?c=c.concat(r,t):0===n?c=c.concat(r.slice(1)):n===r.length-1?c=c.concat(r.slice(0,-1)):n>0&&(c=c.concat(r.slice(0,n),r.slice(n+1))),a.setState({selected:c})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.handleRenew=Object(o.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.getBillsWithRedux();case 1:case"end":return e.stop()}},e,this)})),a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.bills&&this.setState({data:this.props.bills})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.data,c=a.order,i=a.orderBy,l=a.selected,s=a.rowsPerPage,o=a.page,u=s-Math.min(s,r.length-o*s);return n.a.createElement(S.p,{className:t.root},this.state.redirectToEdit&&n.a.createElement(je.a,{to:this.state.redirectToEdit}),n.a.createElement(et,{numSelected:l.length,selected:l,onRenew:this.handleRenew}),n.a.createElement("div",{className:t.tableWrapper},n.a.createElement(S.r,{className:t.table,"aria-labelledby":"tableTitle"},n.a.createElement(Ke,{numSelected:l.length,order:c,orderBy:i,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,onSearch:this.handleSearch,onFilterDate:this.handleFilterDate,rowCount:r.length}),n.a.createElement(S.s,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var r=t(e[0],a[0]);return 0!==r?r:e[1]-a[1]}),a.map(function(e){return e[0]})}(r,function(e,t){return"desc"===e?function(e,a){return Xe(e,a,t)}:function(e,a){return-Xe(e,a,t)}}(c,i)).slice(o*s,o*s+s).map(function(a){var r=e.isSelected(a._id);return n.a.createElement(S.w,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,key:a._id,selected:r},n.a.createElement(S.t,{padding:"checkbox"},n.a.createElement(S.b,{checked:r,onClick:function(t){return e.handleClick(t,a._id)}})),n.a.createElement(S.t,{style:{maxWidth:"30px",wordWrap:"break-word"},align:"right"},a.createAt),n.a.createElement(S.t,{style:{maxWidth:"30px",wordWrap:"break-word"},align:"right"},a._id),n.a.createElement(S.t,{style:{maxWidth:"30px",wordWrap:"break-word"},align:"right"},a.authId),n.a.createElement(S.t,{align:"right"},a.totalPrice," $"),n.a.createElement(S.t,{align:"right"},a.status),n.a.createElement(S.t,null,n.a.createElement(S.a,{variant:"contained",color:"primary",className:t.button,onClick:function(t){return e.editBill(t,a._id)}},n.a.createElement(j.b,{style:{fontSize:20}}))))}),u>0&&n.a.createElement(S.w,{style:{height:49*u}},n.a.createElement(S.t,{colSpan:6}))))),n.a.createElement(S.v,{rowsPerPageOptions:[5,10,25],component:"div",count:r.length,rowsPerPage:s,page:o,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(n.a.Component),at=Object(Z.b)(null,function(e){return{getBillsWithRedux:function(){return e(Je())}}})(Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(tt)),rt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){a.setState({openSnackNumDeleted:!1}),a.props.closeAlertDeleted()},a.state={openSnackNumDeleted:!1,messDeleted:"",adminAccess:!0},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(window.localStorage.getItem("adminPageAccess")).admin_key,e.next=3,C.a.get("/api/users/".concat(t,"/adminPermission"));case 3:if(e.sent.data.admin.bill){e.next=9;break}return this.setState(Object(Q.a)({},this.state,{adminAccess:!1})),e.abrupt("return");case 9:this.setState(Object(Q.a)({},this.state,{adminAccess:!0})),this.props.getBillsWithRedux();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){e.numDeleted&&this.setState(Object(Q.a)({},this.state,{openSnackNumDeleted:!0,messDeleted:"".concat(e.numDeleted," bills has been deleted")}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.numDeleted;return n.a.createElement(n.a.Fragment,null,this.state.adminAccess?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("div",{className:t.header},"Bill Manager"),n.a.createElement(S.d,{variant:"middle",className:t.m_20}),this.props.bills?n.a.createElement(at,{bills:this.props.bills.data}):n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("div",{className:t.header},"Loading..."))),a&&n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.openSnackNumDeleted},this.state.messDeleted))):n.a.createElement(je.a,{to:"/admin"}))}}]),t}(r.Component),nt=Object(b.withStyles)(function(){return{root:{backgroundColor:"white",minHeight:"100vh",borderRadius:"7px",padding:20},header:{fontSize:"1.7em",color:"gray",fontWeight:"bold",textAlign:"center"},m_20:{margin:20}}})(Object(Z.b)(function(e){return{bills:e.bill.bills,numDeleted:e.bill.numDeleted}},function(e){return{getBillsWithRedux:function(){return e(Je())},closeAlertDeleted:function(){return e(function(e){return e({type:"CLOSE_ALERT_DELETED"})})}}})(rt));function ct(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var it=[{_id:"_id",numeric:!0,disablePadding:!1,label:"ID"},{_id:"producer_id",numeric:!0,disablePadding:!1,label:"Category ID"},{_id:"producer_name",numeric:!0,disablePadding:!1,label:"Name"}],lt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,r=t.order,c=t.orderBy,i=t.numSelected,l=t.rowCount,s=t.onSearch;return n.a.createElement(S.u,null,n.a.createElement(S.w,null,n.a.createElement(S.t,{colSpan:8},n.a.createElement(S.y,{label:"Search by ID   ",type:"search",margin:"normal",onChange:s}))),n.a.createElement(S.w,null,n.a.createElement(S.t,{padding:"checkbox"},n.a.createElement(S.b,{indeterminate:i>0&&i<l,checked:i===l,onChange:a})),it.map(function(t){return n.a.createElement(S.t,{key:t._id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:c===t._id&&r},n.a.createElement(S.A,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},n.a.createElement(S.x,{active:c===t._id,direction:r,onClick:e.createSortHandler(t._id)},t.label)))},this),n.a.createElement(S.t,null,"Action")))}}]),t}(n.a.Component),st=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleDelete=Object(o.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isDeleting:!0}),e.next=3,a.props.deleteCategories(a.props.selected);case 3:case"end":return e.stop()}},e,this)})),a.state={isDeleting:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){this.setState({isDeleting:!1})}},{key:"render",value:function(){var e=this.props,t=e.numSelected,a=e.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.z,{className:te()(a.root,Object(y.a)({},a.highlight,t>0))},n.a.createElement("div",{className:a.title},t>0?n.a.createElement(S.B,{color:"inherit",variant:"subtitle1"},t," selected"):n.a.createElement(S.B,{variant:"h6",_id:"tableTitle"},"Categories")),n.a.createElement("div",{className:a.spacer}),n.a.createElement("div",{className:a.actions},t>0?n.a.createElement(S.A,{title:"Delete"},n.a.createElement(S.h,{onClick:this.handleDelete,"aria-label":"Delete"},this.state.isDeleting?n.a.createElement(S.c,{size:24}):n.a.createElement(j.d,null))):n.a.createElement(S.A,{title:"Filter list"},n.a.createElement(S.h,{"aria-label":"Filter list"},n.a.createElement(j.f,null))))))}}]),t}(n.a.Component);st=Object(b.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ke.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Object(Z.b)(function(e){return{numDeleted:e.category.numDeleted}},function(e){return{deleteCategories:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a,r){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=[],e.forEach(function(e){n.push(C.a.delete("/api/producers/".concat(e)))}),t.next=5,Promise.all(n);case 5:return a(J()),t.abrupt("return",a({type:"DELETE_SUCCESS",numDeleted:e.length}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"DELETE_ERROR",err:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))}}})(st));var ot=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:5,redirectToEdit:""},a.handleRequestSort=function(e,t){var r=t,n="desc";a.state.orderBy===t&&"desc"===a.state.order&&(n="asc"),a.setState({order:n,orderBy:r})},a.editCategory=function(e,t){a.setState({redirectToEdit:"/admin/category/".concat(t)})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e._id})}}):a.setState({selected:[]})},a.handleSearch=function(e){var t,r=e.target.value;t=a.props.categories.filter(function(e){var t=r.trim().toLowerCase();return-1!==e._id.indexOf(t)}),a.setState({data:t})},a.handleClick=function(e,t){var r=a.state.selected,n=r.indexOf(t),c=[];-1===n?c=c.concat(r,t):0===n?c=c.concat(r.slice(1)):n===r.length-1?c=c.concat(r.slice(0,-1)):n>0&&(c=c.concat(r.slice(0,n),r.slice(n+1))),a.setState({selected:c})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.categories&&this.setState({data:this.props.categories})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.data,c=a.order,i=a.orderBy,l=a.selected,s=a.rowsPerPage,o=a.page,u=s-Math.min(s,r.length-o*s);return n.a.createElement(S.p,{className:t.root},this.state.redirectToEdit&&n.a.createElement(je.a,{to:this.state.redirectToEdit}),n.a.createElement(st,{numSelected:l.length,selected:l}),n.a.createElement("div",{className:t.tableWrapper},n.a.createElement(S.r,{className:t.table,"aria-labelledby":"tableTitle"},n.a.createElement(lt,{numSelected:l.length,order:c,orderBy:i,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,onSearch:this.handleSearch,rowCount:r.length}),n.a.createElement(S.s,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var r=t(e[0],a[0]);return 0!==r?r:e[1]-a[1]}),a.map(function(e){return e[0]})}(r,function(e,t){return"desc"===e?function(e,a){return ct(e,a,t)}:function(e,a){return-ct(e,a,t)}}(c,i)).slice(o*s,o*s+s).map(function(a){var r=e.isSelected(a._id);return n.a.createElement(S.w,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,key:a._id,selected:r},n.a.createElement(S.t,{padding:"checkbox"},n.a.createElement(S.b,{checked:r,onClick:function(t){return e.handleClick(t,a._id)}})),n.a.createElement(S.t,{align:"right",style:{padding:"0",maxWidth:"30px",wordWrap:"break-word"}},a._id),n.a.createElement(S.t,{align:"right"},a.producer_id),n.a.createElement(S.t,{align:"right"},a.producer_name),n.a.createElement(S.t,null,n.a.createElement(S.a,{variant:"contained",color:"primary",className:t.button,onClick:function(t){return e.editCategory(t,a._id)}},n.a.createElement(j.b,{style:{fontSize:20}}))))}),u>0&&n.a.createElement(S.w,{style:{height:49*u}},n.a.createElement(S.t,{colSpan:6}))))),n.a.createElement(S.v,{rowsPerPageOptions:[5,10,25],component:"div",count:r.length,rowsPerPage:s,page:o,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(n.a.Component),ut=Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(ot),dt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={producer_name:"",producer_id:"",isAdding:!1,message:"",open:!1,validateError:!1},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleClose=function(){a.setState({open:!1})},a.validated__input=function(e,t,r,n){var c=e,i=document.getElementsByName(r)[0];return!!i&&(t.test(c)?(a.setState({validateError:""}),!0):(i.focus(),a.setState({validateError:"Please complete this field"}),!1))},a.valudated__form=function(){return!(!a.validated__input(a.state.producer_name,/[\w\s-]{1,}/,"producer_name")||!a.validated__input(a.state.producer_id,/^[A-Z]{1,}$/,"producer_id"))},a.handleSubmit=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.valudated__form()){e.next=3;break}return e.abrupt("return");case 3:return a.setState({isAdding:!0}),e.next=6,a.props.createCategory(a.state);case 6:a.props.createError?a.setState({isAdding:!1}):(a.props.getCategoriesWithRedux(),a.setState({isAdding:!1,open:!0,message:"Adding ".concat(a.state._id," success")}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:e.formTitle},"Add new Category"),n.a.createElement("form",{encType:"multipart/form-data",id:"addNewCategory",className:e.container,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit},n.a.createElement(S.y,{required:!0,name:"producer_name",label:"Category Name",className:e.textField,onChange:this.handleChange,helperText:"Not special character"}),n.a.createElement(S.y,{required:!0,name:"producer_id",label:"ID",className:e.textField,onChange:this.handleChange,helperText:"Uppercase Only"})),this.props.createError&&n.a.createElement("p",{style:{color:"red"}},this.props.createError),this.state.validateError&&n.a.createElement("p",{style:{color:"red"}},this.state.validateError),n.a.createElement(S.a,{variant:"contained",color:"primary",form:"addNewCategory",type:"submit"},this.state.isAdding?n.a.createElement(S.c,{size:24,className:e.bgWhite}):n.a.createElement("span",null,"Add New Category")),n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.open},this.state.message)))}}]),t}(r.Component),mt=Object(b.withStyles)(function(){return{container:{display:"flex",flexWrap:"wrap"},textField:{margin:10,width:200},dense:{marginTop:19},menu:{width:200},formTitle:{color:"#4445"},bgWhite:{color:"white"}}})(Object(Z.b)(function(e){return{createError:e.category.createError}},function(e){return{createCategory:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a,r){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("/api/producers/",e);case 3:if(!(n=t.sent).data.err){t.next=6;break}return t.abrupt("return",a({type:"CREATE_ERROR",err:n.data.err}));case 6:return t.abrupt("return",a({type:"CREATE_SUCCESS"}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"CREATE_ERROR",err:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))},getCategoriesWithRedux:function(){return e(J())}}})(dt)),pt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){a.setState({openSnackNumDeleted:!1}),(0,a.props.dispatch)(X())},a.state={openSnackNumDeleted:!1,messDeleted:"",adminAccess:!0},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(window.localStorage.getItem("adminPageAccess")).admin_key,e.next=3,C.a.get("/api/users/".concat(t,"/adminPermission"));case 3:if(e.sent.data.admin.category){e.next=9;break}return this.setState(Object(Q.a)({},this.state,{adminAccess:!1})),e.abrupt("return");case 9:return a=this.props.dispatch,e.next=12,a(J());case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){e.numDeleted&&this.setState({openSnackNumDeleted:!0,messDeleted:"".concat(e.numDeleted," categories has been deleted")})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.numDeleted;return n.a.createElement(n.a.Fragment,null,this.state.adminAccess?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("div",{className:t.header},"Category Manager"),n.a.createElement(S.d,{variant:"middle",className:t.m_20}),n.a.createElement(mt,null),n.a.createElement(S.d,{variant:"middle",className:t.m_20}),this.props.categories?n.a.createElement(ut,{categories:this.props.categories.data}):n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("div",{className:t.header},"Loading..."))),a&&n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.openSnackNumDeleted},this.state.messDeleted))):n.a.createElement(je.a,{to:"/admin"}))}}]),t}(r.Component),ht=Object(b.withStyles)(function(){return{root:{backgroundColor:"white",minHeight:"100vh",borderRadius:"7px",padding:20},header:{fontSize:"1.7em",color:"gray",fontWeight:"bold",textAlign:"center"},m_20:{margin:20}}})(Object(Z.b)(function(e){return{categories:e.category.categories,numDeleted:e.category.numDeleted}})(pt)),Et=a(5619),gt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={_id:"",product_name:"",product_price:1,producer:"",quantity:1,product_img:null,product_img_path:"",onLoading:!1,message:"",open:!1,product:{},stateImgPath:"",categories:[],validateError:!1},a.handleChangeFile=function(e){a.setState({product_img:e.target.files[0],product_img_path:e.target.files[0]?e.target.files[0].name:null})},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleClose=function(){a.setState({open:!1})},a.validated__input=function(e,t,r,n){var c=e,i=document.getElementsByName(r)[0];return n&&a.setState({err:Object(y.a)({},n,!0)}),!!i&&(t.test(c)?(n&&a.setState({err:Object(y.a)({},n.key,!1),validateError:""}),!0):(i.focus(),a.setState({err:Object(y.a)({},n,!0),validateError:"Please complete this field"}),!1))},a.validated__input_file=function(e,t){var r=document.getElementsByName(e)[0];return t&&a.setState({err:Object(y.a)({},t,!0)}),r&&r.value?(t&&a.setState({err:Object(y.a)({},t.key,!1)}),!0):(r.click(),!1)},a.valudated__form=function(){return!!(a.validated__input(a.state.product_name,/[\w\s-]{1,}/,"product_name")&&a.validated__input(a.state.product_price,/^[0-9]{1,5}$/,"product_price")&&a.validated__input(a.state.quantity,/^[0-9]{1,5}$/,"quantity")&&a.validated__input(a.state.producer,/[\w]{1,20}/,"producer","errSelection"))},a.handleSubmit=function(){var e=Object(o.a)(s.a.mark(function e(t){var r,n,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props,n=r.editError,c=r.editProduct,t.preventDefault(),a.valudated__form()){e.next=4;break}return e.abrupt("return");case 4:return a.setState({onLoading:!0}),e.next=7,c(a.state);case 7:n||a.setState({onLoading:!1,open:!0,message:"Edit ".concat(a.state.product_name," success"),stateImgPath:a.state.product_img_path?"/uploads/".concat(a.state.product_img_path.trim()):a.state.stateImgPath});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getProductsAndCategories();case 2:this.props.haveProduct&&(t=this.props.product,this.setState({product_name:t.product_name,product_price:t.product_price,producer:t.producer,quantity:t.quantity,product_img_path:t.product_img,_id:t._id,stateImgPath:t.product_img})),this.props.categories&&this.setState({categories:this.props.categories.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:"".concat(e.root," fadeIn")},n.a.createElement("h2",{className:e.formTitle},"Edit Product",n.a.createElement(Et.a,{to:"/admin/product",style:{marginLeft:200}},n.a.createElement(S.a,{variant:"contained",color:"default"},"Back"))),this.props.haveProduct?n.a.createElement(S.g,{container:!0},n.a.createElement(S.g,{item:!0,xs:6},n.a.createElement("form",{noValidate:!0,id:"addNewProduct",autoComplete:"off",onSubmit:this.handleSubmit},n.a.createElement(S.y,{required:!0,name:"product_name",label:"Product Name",value:this.state.product_name,className:e.textField,onChange:this.handleChange}),n.a.createElement("br",null),n.a.createElement(S.y,{required:!0,name:"product_price",label:"Price ($)",className:e.textField,onChange:this.handleChange,value:this.state.product_price,type:"number",min:1}),n.a.createElement("br",null),n.a.createElement(S.y,{required:!0,value:this.state.quantity,name:"quantity",label:"Quantity",className:e.textField,onChange:this.handleChange,type:"number"}),n.a.createElement("br",null),n.a.createElement(S.f,{className:e.textField},n.a.createElement(S.j,{htmlFor:"producer-select"},"Category"),n.a.createElement(S.q,{required:!0,value:this.state.producer,onChange:this.handleChange,name:"producer",renderValue:function(e){return e},input:n.a.createElement(S.i,{id:"producer-select"})},this.state.categories&&this.state.categories.map(function(e,t){return n.a.createElement(S.o,{key:t,value:e.producer_id},e.producer_name)}))),n.a.createElement("br",null),n.a.createElement(S.y,{accept:"image/*",name:"product_img",className:"hidden",onChange:this.handleChangeFile,type:"file",id:"contained-button-file"}),n.a.createElement("label",{htmlFor:"contained-button-file"},n.a.createElement(S.a,{variant:"contained",component:"span"},"Upload Image")),n.a.createElement("br",null),n.a.createElement("br",null),this.props.createError&&n.a.createElement("p",{style:{color:"red"}},this.props.createError),this.state.validateError&&n.a.createElement("p",{style:{color:"red"}},this.state.validateError)),this.state.onLoading?n.a.createElement(S.a,{variant:"contained",color:"primary"},n.a.createElement(S.c,{size:24,className:e.bgWhite})):n.a.createElement(S.a,{variant:"contained",color:"primary",form:"addNewProduct",type:"submit"},"Edit"),n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.open},this.state.message))),n.a.createElement(S.g,{item:!0,xs:6},n.a.createElement("img",{alt:"thisAlt",src:this.state.stateImgPath,width:"310"}))):n.a.createElement("h1",null,"Does not have this product."))}}]),t}(r.Component),ft=Object(b.withStyles)(function(){return{textField:{margin:10,width:400},formTitle:{color:"#4445"},bgWhite:{color:"white"},root:{backgroundColor:"white",borderRadius:"7px",padding:20}}})(Object(Z.b)(function(e,t){var a=t.match.params.id,r=e.product.products,n=null,c=!1;return r&&r.data&&(n=r.data.find(function(e){return e._id===a}))&&(c=!0),{product:n,haveProduct:c,editError:e.product.editError,categories:e.product.categories}},function(e){return{editProduct:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.product_img){t.next=9;break}return(r=new FormData).append("product_img",e.product_img),t.next=6,C.a.post("/api/products/",r,{headers:{"Content-Type":"multipart/form-data"}});case 6:e.product_img_path=e.product_img.name,t.next=10;break;case 9:e.product_img_path=null;case 10:return t.next=12,C.a.put("/api/products/".concat(e._id),e);case 12:return t.abrupt("return",a({type:"EDIT_SUCCESS"}));case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",a({type:"EDIT_ERRO",err:t.t0}));case 18:case"end":return t.stop()}},t,this,[[0,15]])}));return function(e){return t.apply(this,arguments)}}()}(t))},getProductsAndCategories:function(){return e(function(){var e=Object(o.a)(s.a.mark(function e(t){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C()("/api/products/");case 3:return a=e.sent,e.next=6,C()("/api/producers/");case 6:return r=e.sent,e.abrupt("return",t({type:"GET_PRODUCTS_AND_CATEGORIES_SUCCESS",products:a.data,categories:r.data}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",t({type:"GET_PRODUCTS_AND_CATEGORIES_ERROR",err:e.t0.message}));case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}())}}})(gt)),bt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={_id:"",user_name:"",user_password:"",user_group:"",user_phone:"",user_email:"",onLoading:"",message:"",user_permission:{product:!1,user:!1,bill:!1,category:!1},user_status:!0,open:!1,user:{}},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleClose=function(){a.setState({open:!1})},a.checkedCheckBox=function(){for(var e=window.document.getElementsByName("user_permission"),t=0;t<e.length;t++)e[t].checked=""},a.validated__input=function(e,t,r,n){var c=e,i=document.getElementsByName(r)[0];return n&&a.setState({err:Object(y.a)({},n,!0)}),!!i&&(t.exec(c)?t.exec(c)[0]!==t.exec(c).input?(i.focus(),!1):(n&&a.setState({err:Object(y.a)({},n.key,!1)}),!0):(i.focus(),i.click(),!1))},a.valudated__form=function(){return!!(a.validated__input(a.state.user_name,/[\w\s-]{1,}/,"user_name")&&a.validated__input(a.state.user_phone,/[0-9]{10,12}/,"user_phone")&&a.validated__input(a.state.user_group,/[\w]{1,20}/,"user_group","errSelection")&&a.validated__input(a.state.user_email,/^[a-z][a-z0-9_.]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/,"user_email"))},a.handleSubmit=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.valudated__form()){e.next=3;break}return e.abrupt("return");case 3:return a.setState({onLoading:!0}),e.next=6,a.props.editUser(a.state);case 6:a.props.editError?a.setState({onLoading:!1}):a.setState({onLoading:!1,open:!0,message:"Edit ".concat(a.state.user_email," success")});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleSelectPermission=function(e){a.setState({user_permission:Object(Q.a)({},a.state.user_permission,Object(y.a)({},e.target.name,e.target.checked))})},a.handleSelectUserStatus=function(e){a.setState({user_status:e.target.checked})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getUsersWithRedux();case 2:this.props.haveUser&&(t=this.props.user,this.setState({user_name:t.user_name,user_password:t.user_password,user_group:t.user_group,user_phone:t.user_phone,user_email:t.user_email,_id:t._id,user_permission:t.user_permission,user_status:t.user_status}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:"".concat(t.root," fadeIn")},n.a.createElement("h2",{className:t.formTitle},"Edit User",n.a.createElement(Et.a,{to:"/admin/user",style:{marginLeft:200}},n.a.createElement(S.a,{variant:"contained",color:"default"},"Back"))),this.props.haveUser?n.a.createElement(S.g,{container:!0},n.a.createElement(S.g,{item:!0,xs:6},n.a.createElement("form",{id:"addNewUser",autoComplete:"off",onSubmit:this.handleSubmit},n.a.createElement(S.y,{required:!0,name:"user_name",label:"User Name",value:this.state.user_name,className:t.textField,onChange:this.handleChange}),n.a.createElement("br",null),n.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){e.setState(Object(Q.a)({},e.state,{user_password:"123456"}))}},"RESET PASSWORD"),n.a.createElement("br",null),n.a.createElement(S.y,{required:!0,value:this.state.user_phone,name:"user_phone",label:"Phone",className:t.textField,onChange:this.handleChange,type:"number"}),n.a.createElement("br",null),n.a.createElement(S.f,{className:t.textField},n.a.createElement(S.j,{htmlFor:"user_group-select"},"Group"),n.a.createElement(S.q,{required:!0,value:this.state.user_group,onChange:this.handleChange,name:"user_group",renderValue:function(e){return e},input:n.a.createElement(S.i,{id:"user_group-select"})},n.a.createElement(S.o,{value:"admin"},"Admin"),n.a.createElement(S.o,{value:"client"},"Client"))),n.a.createElement("br",null),"admin"===this.state.user_group?n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{style:{color:"gray",fontSize:"13px"}},"Choose permission manager:"),n.a.createElement(S.b,{checked:this.state.user_permission.bill,onChange:this.handleSelectPermission,name:"bill"}),"Bill",n.a.createElement(S.b,{checked:this.state.user_permission.user,onChange:this.handleSelectPermission,name:"user"}),"User",n.a.createElement(S.b,{checked:this.state.user_permission.product,onChange:this.handleSelectPermission,name:"product"}),"Product",n.a.createElement(S.b,{checked:this.state.user_permission.category,onChange:this.handleSelectPermission,name:"category"}),"Category"):null,n.a.createElement(S.y,{required:!0,value:this.state.user_email,name:"user_email",label:"Email",className:t.textField,onChange:this.handleChange,type:"email"}),n.a.createElement("br",null),"Status :",n.a.createElement(S.b,{checked:this.state.user_status,onChange:this.handleSelectUserStatus}),this.props.editError&&n.a.createElement("h4",{style:{color:"red"}},this.props.editError)),this.state.onLoading?n.a.createElement(S.a,{variant:"contained",color:"primary"},n.a.createElement(S.c,{size:24,className:t.bgWhite})):n.a.createElement(S.a,{variant:"contained",color:"primary",form:"addNewUser",type:"submit"},"Edit"),n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.open},this.state.message)))):n.a.createElement("h1",null,"Does not have this user."))}}]),t}(r.Component),vt=Object(b.withStyles)(function(){return{textField:{margin:10,width:400},formTitle:{color:"#4445"},bgWhite:{color:"white"},root:{backgroundColor:"white",borderRadius:"7px",padding:20}}})(Object(Z.b)(function(e,t){var a=t.match.params.id,r=e.user.users,n=null,c=!1;return r&&r.data&&(n=r.data.find(function(e){return e._id===a}))&&(c=!0),{user:n,haveUser:c,editError:e.user.editError}},function(e){return{editUser:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.put("/api/users/".concat(e._id),e);case 3:if(!(r=t.sent).data.err){t.next=6;break}return t.abrupt("return",a({type:"EDIT_ERROR",err:r.data.err}));case 6:return t.abrupt("return",a({type:"EDIT_SUCCESS"}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"EDIT_ERROR",err:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()}(t))},getUsersWithRedux:function(){return e(Ie())}}})(bt)),yt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={_id:"",authId:"",totalPrice:"",status:"",details:"",onLoading:"",message:"",open:!1,bill:{}},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleClose=function(){a.setState({open:!1})},a.validated__input=function(e,t,r,n){var c=e,i=document.getElementsByName(r)[0];return n&&a.setState({err:Object(y.a)({},n,!0)}),!!i&&(t.exec(c)?t.exec(c)[0]!==t.exec(c).input?(i.focus(),!1):(n&&a.setState({err:Object(y.a)({},n.key,!1)}),!0):(i.focus(),i.click(),!1))},a.valudated__form=function(){return!!a.validated__input(a.state.bill_name,/[\w\s-]{1,}/,"status")},a.handleSubmit=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.valudated__form()){e.next=3;break}return e.abrupt("return");case 3:return a.setState({onLoading:!0}),e.next=6,a.props.editBill(a.state);case 6:a.props.editError?a.setState({onLoading:!1}):a.setState({onLoading:!1,open:!0,message:"Edit ".concat(a.state._id," success")});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a,r,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getBillsWithRedux();case 2:if(this.props.haveBill){for(t=this.props.bill,a=[],r=0;r<t.details.proId.length;r++)n={proId:t.details.proId,proPrice:t.details.proPrice,proQuantity:t.details.proQuantity},a.push(n);this.setState({_id:t._id,createAt:t.createAt,authId:t.authId,totalPrice:t.totalPrice,status:t.status,details:a})}case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;if(!this.state.details)return n.a.createElement("h2",null,"Waiting...");var t=Object(v.a)(this.state.details);return n.a.createElement("div",{className:"".concat(e.root," fadeIn")},n.a.createElement("h2",{className:e.formTitle},"Edit Bill",n.a.createElement(Et.a,{to:"/admin/bill",style:{marginLeft:200}},n.a.createElement(S.a,{variant:"contained",color:"default"},"Back"))),this.props.haveBill?n.a.createElement(S.p,null,n.a.createElement(S.r,null,n.a.createElement(S.s,null,n.a.createElement(S.w,null,n.a.createElement(S.t,null,n.a.createElement("b",null,"Bill Id : ")," ",this.state._id)),n.a.createElement(S.w,null,n.a.createElement(S.t,null,n.a.createElement("b",null,"Create At : ")," ",this.state.createAt)),n.a.createElement(S.w,null,n.a.createElement(S.t,null,n.a.createElement("b",null,"User Id : ")," ",this.state.authId)),n.a.createElement(S.w,null,n.a.createElement(S.t,null,n.a.createElement("b",null,"Total Price : ")," ",this.state.totalPrice)),n.a.createElement(S.w,null,n.a.createElement(S.t,null,n.a.createElement("b",null,"Status : "),n.a.createElement("form",{onSubmit:this.handleSubmit,id:"formEditBill",style:{display:"inline"}},n.a.createElement(S.q,{value:this.state.status,onChange:this.handleChange,name:"status"},n.a.createElement(S.o,{value:"paid"},"Paid"),n.a.createElement(S.o,{value:"unpaid"},"Unpaid")),this.state.onLoading?n.a.createElement(S.a,null,n.a.createElement(S.c,{size:20,className:e.bgWhite})):n.a.createElement(S.a,{type:"submit",form:"formEditBill",variant:"contained",color:"primary",size:"small",style:{marginLeft:"10px"}},"Update")),this.props.editError&&n.a.createElement("h4",{style:{color:"red"}},this.props.editError))),n.a.createElement(S.w,null,n.a.createElement(S.t,null,n.a.createElement("h2",{style:{color:"gray"}},"Details"))),n.a.createElement(S.w,null,n.a.createElement(S.t,null,n.a.createElement(S.r,null,n.a.createElement(S.s,null,n.a.createElement(S.w,null,n.a.createElement(S.t,{align:"center"},"Product Id"),n.a.createElement(S.t,{align:"center"},"Quantity"),n.a.createElement(S.t,{align:"center"},"Product Price ($)")),t.map(function(e,t){return n.a.createElement(S.w,{key:t},n.a.createElement(S.t,{align:"center"},e.proId),n.a.createElement(S.t,{align:"center"},e.proQuantity),n.a.createElement(S.t,{align:"center"},e.proPrice))}))))))),n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.open},this.state.message))):n.a.createElement("h1",null,"Does not have this bill."))}}]),t}(r.Component),St=Object(b.withStyles)(function(){return{textField:{margin:10,width:400},formTitle:{color:"#4445"},bgWhite:{color:"white"},root:{backgroundColor:"white",borderRadius:"7px",padding:20}}})(Object(Z.b)(function(e,t){var a=t.match.params.id,r=e.bill.bills,n=null,c=!1;return r&&r.data&&(n=r.data.find(function(e){return e._id===a}))&&(c=!0),{bill:n,haveBill:c,editError:e.bill.editError}},function(e){return{editBill:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.put("/api/bills/".concat(e._id),e);case 3:if(!(r=t.sent).data.err){t.next=6;break}return t.abrupt("return",a({type:"EDIT_ERROR",err:r.data.err}));case 6:return t.abrupt("return",a({type:"EDIT_SUCCESS"}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"EDIT_ERROR",err:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()}(t))},getBillsWithRedux:function(){return e(Je())}}})(yt)),_t=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={_id:"",producer_name:"",producer_id:"",onLoading:"",message:"",open:!1,category:{},validateError:!1},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleClose=function(){a.setState({open:!1})},a.validated__input=function(e,t,r,n){var c=e,i=document.getElementsByName(r)[0];return n&&a.setState({err:Object(y.a)({},n,!0)}),!!i&&(t.test(c)?(a.setState({validateError:""}),!0):(i.focus(),a.setState({validateError:"Please complete this field"}),!1))},a.valudated__form=function(){return!(!a.validated__input(a.state.producer_name,/[\w\s-]{1,}/,"producer_name")||!a.validated__input(a.state.producer_id,/^[A-Z]{1,}$/,"producer_id"))},a.handleSubmit=function(){var e=Object(o.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.valudated__form()){e.next=3;break}return e.abrupt("return");case 3:return a.setState({onLoading:!0}),e.next=6,a.props.editCategory(a.state);case 6:a.props.editError?a.setState({onLoading:!1}):a.setState({onLoading:!1,open:!0,message:"Edit ".concat(a.state.producer_id," success")});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getCategoriesWithRedux();case 2:this.props.haveCategory&&(t=this.props.category,this.setState({producer_name:t.producer_name,producer_id:t.producer_id,_id:t._id}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:"".concat(e.root," fadeIn")},n.a.createElement("h2",{className:e.formTitle},"Edit Category",n.a.createElement(Et.a,{to:"/admin/category",style:{marginLeft:200}},n.a.createElement(S.a,{variant:"contained",color:"default"},"Back"))),this.props.haveCategory?n.a.createElement(S.g,{container:!0},n.a.createElement(S.g,{item:!0,xs:6},n.a.createElement("form",{noValidate:!0,id:"editCategory",autoComplete:"off",onSubmit:this.handleSubmit},n.a.createElement(S.y,{required:!0,name:"producer_name",label:"Category Name",value:this.state.producer_name,className:e.textField,onChange:this.handleChange,helperText:"Uppercase Only"}),n.a.createElement("br",null),n.a.createElement(S.y,{required:!0,name:"producer_id",label:"ID",className:e.textField,onChange:this.handleChange,value:this.state.producer_id,helperText:"Not special character"}),n.a.createElement("br",null),this.props.editError&&n.a.createElement("p",{style:{color:"red"}},this.props.editError)," ",n.a.createElement("br",null),this.state.validateError&&n.a.createElement("p",{style:{color:"red"}},this.state.validateError)),this.state.onLoading?n.a.createElement(S.a,{variant:"contained",color:"primary"},n.a.createElement(S.c,{size:24,className:e.bgWhite})):n.a.createElement(S.a,{variant:"contained",color:"primary",form:"editCategory",type:"submit"},"Edit"),n.a.createElement("div",{onClick:this.handleClose},n.a.createElement(Ce,{open:this.state.open},this.state.message)))):n.a.createElement("h1",null,"Does not have this category."))}}]),t}(r.Component),Ct=Object(b.withStyles)(function(){return{textField:{margin:10,width:400},formTitle:{color:"#4445"},bgWhite:{color:"white"},root:{backgroundColor:"white",borderRadius:"7px",padding:20}}})(Object(Z.b)(function(e,t){var a=t.match.params.id,r=e.category.categories,n=null,c=!1;return r&&r.data&&(n=r.data.find(function(e){return e._id===a}))&&(c=!0),{category:n,haveCategory:c,editError:e.category.editError}},function(e){return{editCategory:function(t){return e(function(e){return function(){var t=Object(o.a)(s.a.mark(function t(a){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.put("/api/producers/".concat(e._id),e);case 3:if(!(r=t.sent).data.err){t.next=6;break}return t.abrupt("return",a({type:"EDIT_ERROR",err:r.data.err}));case 6:return t.abrupt("return",a({type:"EDIT_SUCCESS"}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",a({type:"EDIT_ERROR",err:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()}(t))},getCategoriesWithRedux:function(){return e(J())}}})(_t)),Ot=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={user_email:"",user_password:"",loginError:"",redirectToAdminPage:!1},a.validated__input=function(e,t,r){var n=document.getElementById(e),c=t;return!!r.test(c)||(n.focus(),n.placeholder="Input this Field",a.setState({loginError:"This Field is Require"}),!1)},a.validated__form=function(){return!(!a.validated__input("user_email",a.state.user_email,/^[a-z][a-z0-9_.]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/)||!a.validated__input("user_password",a.state.user_password,/^.{6,}$/))},a.handleChange=function(e){return function(t){a.setState(Object(y.a)({},e,t.target.value))}},a.handleSubmit=function(){var e=Object(o.a)(s.a.mark(function e(t){var r,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.validated__form()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,C.a.post("/api/users/signin",a.state);case 6:(r=e.sent).data.err?a.setState({loginError:r.data.err}):r.data.adminDetails?(n={admin_name:r.data.adminDetails.user_name,admin_key:r.data.adminDetails._id},window.localStorage.setItem("adminPageAccess",JSON.stringify(n)),window.location="/admin"):a.setState({loginError:"Can not handle this error"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),a.setState({loginError:e.t0.message});case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(S.p,{elevation:1,style:{position:"fixed",transform:"translate(-50%, -50%)",top:"40%",left:"50%",padding:"20px 50px",minHeight:"50%"}},n.a.createElement("h2",{style:{color:"gray"}},"Sign In Admin",n.a.createElement("a",{href:"/home"},n.a.createElement(S.a,{variant:"contained",color:"default",style:{float:"right"}},"Back"))),n.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0,style:{margin:"auto"}},n.a.createElement(S.y,{style:{width:"300px"},id:"user_email",margin:"normal",label:"Email",onChange:this.handleChange("user_email")}),n.a.createElement("br",null),n.a.createElement(S.y,{style:{width:"300px"},id:"user_password",margin:"normal",label:"Password",onChange:this.handleChange("user_password"),type:"password"}),n.a.createElement("p",{style:{color:"red"}},this.state.loginError),n.a.createElement(S.a,{color:"primary",style:{marginTop:10},type:"submit",variant:"contained"},"Login"))))}}]),t}(r.Component),wt=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement(S.g,{container:!0,style:{flexGrow:1,padding:20,color:"gray"},spacing:16},n.a.createElement(S.g,{item:!0,style:{flexGrow:1}},"\xa9 ShopPhone 2019"),n.a.createElement(S.g,{item:!0},n.a.createElement("a",{style:{color:"blue"},href:"https://github.com/ninhnguyen375/doanweb2"},"Project on Github")))}}]),t}(r.Component),jt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={isAdmin:!1,checkAdminError:"",adminDetails:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.localStorage.getItem("adminPageAccess"),t=JSON.parse(t)){e.next=4;break}return e.abrupt("return");case 4:return this.setState({adminDetails:t}),e.next=7,C.a.get("/api/users/checkAdmin/".concat(t.admin_key));case 7:(a=e.sent).data.err?this.setState({checkAdminError:a.data.err}):a.data.isAdmin?this.setState({isAdmin:!0}):this.setState({isAdmin:!1});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(E.a,null,this.state.isAdmin?n.a.createElement(n.a.Fragment,null,n.a.createElement($,{adminName:this.state.adminDetails&&this.state.adminDetails.admin_name}),n.a.createElement(H,null),n.a.createElement("div",null,n.a.createElement(g.a,null,n.a.createElement(f.a,{path:"/admin",exact:!0,component:D}),n.a.createElement(f.a,{path:"/admin/product",exact:!0,component:Be}),n.a.createElement(f.a,{path:"/admin/product/:id",component:ft}),n.a.createElement(f.a,{path:"/admin/user",exact:!0,component:Qe}),n.a.createElement(f.a,{path:"/admin/user/:id",component:vt}),n.a.createElement(f.a,{path:"/admin/bill",exact:!0,component:nt}),n.a.createElement(f.a,{path:"/admin/bill/:id",component:St}),n.a.createElement(f.a,{path:"/admin/category",exact:!0,component:ht}),n.a.createElement(f.a,{path:"/admin/category/:id",component:Ct})),n.a.createElement(wt,null))):n.a.createElement(Ot,null)))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var kt=a(45),xt={products:[],categories:[],getError:null,createError:null},Pt={users:[],getError:null,createError:null},Dt={bills:[],getError:null,createError:null},Rt={categories:[],getError:null,createError:null},Nt=Object(kt.c)({product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=t.products,c=t.err,i=t.numDeleted,l=t.categories;switch(a){case"GET_REQUEST":case"GET_SUCCESS":return Object(Q.a)({},e,r,{products:n,getError:null});case"GET_ERROR":return Object(Q.a)({},e,r,{getError:c});case"CREATE_SUCCESS":return Object(Q.a)({},e,r,{createError:null});case"CREATE_ERROR":return Object(Q.a)({},e,r,{createError:c});case"DELETE_SUCCESS":return Object(Q.a)({},e,r,{numDeleted:i});case"CLOSE_ALERT_DELETED":return Object(Q.a)({},e,r,{numDeleted:null});case"DELETE_ERROR":return Object(Q.a)({},e,r,{deleteError:c});case"EDIT_SUCCESS":return Object(Q.a)({},e,r,{editError:null});case"EDIT_ERROR":return Object(Q.a)({},e,r,{editError:c});case"GET_PRODUCTS_AND_CATEGORIES_SUCCESS":return Object(Q.a)({},e,r,{getError:null,products:n,categories:l});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=t.users,c=t.err,i=t.numDeleted;switch(a){case"GET_REQUEST":case"GET_SUCCESS":return Object(Q.a)({},e,r,{users:n,getError:null});case"GET_ERROR":return Object(Q.a)({},e,r,{getError:c});case"CREATE_SUCCESS":return Object(Q.a)({},e,r,{createError:null});case"CREATE_ERROR":return Object(Q.a)({},e,r,{createError:c});case"DELETE_SUCCESS":return Object(Q.a)({},e,r,{numDeleted:i});case"CLOSE_ALERT_DELETED":return Object(Q.a)({},e,r,{numDeleted:null});case"DELETE_ERROR":return Object(Q.a)({},e,r,{deleteError:c});case"EDIT_SUCCESS":return Object(Q.a)({},e,r,{editError:null});case"EDIT_ERROR":return Object(Q.a)({},e,r,{editError:c});default:return e}},bill:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=t.bills,c=t.err,i=t.numDeleted;switch(a){case"GET_REQUEST":case"GET_SUCCESS":return Object(Q.a)({},e,r,{bills:n,getError:null});case"GET_ERROR":return Object(Q.a)({},e,r,{getError:c});case"CREATE_SUCCESS":return Object(Q.a)({},e,r,{createError:null});case"CREATE_ERROR":return Object(Q.a)({},e,r,{createError:c});case"DELETE_SUCCESS":return Object(Q.a)({},e,r,{numDeleted:i});case"CLOSE_ALERT_DELETED":return Object(Q.a)({},e,r,{numDeleted:null});case"DELETE_ERROR":return Object(Q.a)({},e,r,{deleteError:c});case"EDIT_SUCCESS":return Object(Q.a)({},e,r,{editError:null});case"EDIT_ERROR":return Object(Q.a)({},e,r,{editError:c});default:return e}},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=t.categories,c=t.err,i=t.numDeleted;switch(a){case"GET_REQUEST":case"GET_SUCCESS":return Object(Q.a)({},e,r,{categories:n,getError:null});case"GET_ERROR":return Object(Q.a)({},e,r,{getError:c});case"CREATE_SUCCESS":return Object(Q.a)({},e,r,{createError:null});case"CREATE_ERROR":return Object(Q.a)({},e,r,{createError:c});case"DELETE_SUCCESS":return Object(Q.a)({},e,r,{numDeleted:i});case"CLOSE_ALERT_DELETED":return Object(Q.a)({},e,r,{numDeleted:null});case"DELETE_ERROR":return Object(Q.a)({},e,r,{deleteError:c});case"EDIT_SUCCESS":return Object(Q.a)({},e,r,{editError:null});case"EDIT_ERROR":return Object(Q.a)({},e,r,{editError:c});default:return e}}}),Tt=a(183),At=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h3",{style:{color:"gray"}},"Redirecting to Home ..."),window.location="/home")}}]),t}(r.Component),Bt=Object(kt.d)(Nt,Object(kt.a)(Tt.a));i.a.render(n.a.createElement(E.a,null,n.a.createElement(g.a,null,n.a.createElement(f.a,{path:"/admin",component:function(){return n.a.createElement(Z.a,{store:Bt},n.a.createElement(jt,null))}}),n.a.createElement(f.a,{path:"/",exact:!0,component:At}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5443,2,1]]]);
//# sourceMappingURL=main.8207b4af.chunk.js.map